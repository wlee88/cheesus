# @cheesus/api

This is the API for the Cheesus project. It is built using the NestJS framework.

## Description

- [Nest](https://github.com/nestjs/nest) framework TypeScript starter repository.
- [ts-rest](https://ts-rest.com/docs/quickstart) for validation- automatic client library typings

## Installation

```bash
$ yarn install
```

## Running the app

```bash
# development
$ yarn run start

# watch mode
$ yarn run start:dev

# production mode
$ yarn run start:prod
```

- Site is now available at `http://localhost:3000`
- Swagger docs available at `http://localhost:3000/api`

## Test

```bash
# unit tests
$ yarn run test

```
## Structure and adding more routes
- routes are defined in `packages/contracts/src/contracts.ts`
- Validation is handled by [zod](https://zod.dev/), and the client library is generated by [ts-rest](https://ts-rest.com/)

## Generating migrations

- Sometimes you need to run raw sql queries via migrations. To do this, you can generate a migration file by running the following command:

```bash
 yarn workspace @cheesus/api  typeorm migration:create migrations/[name-of-migration]
```
- IMPORTANT: also add it to `app.module` -> `TypeOrmModule.forRoot` -> `migrations`. This will run on app startup.

